
/**
 * A View to handle the header main menu of the site.
 */
define([
    'jquery',
    'underscore',
    'backbone'],
function($, _, Backbone, Mustache) {

    /**
     * View wrapper for the header navigation menu (``#header-menu``).  Intended to
     * wrap an existing DOM element and bind events to it.
     *
     * Usage:
     *
     * ```
     * var header_menu_view = new HeaderMenuView({el: "#header-menu"});
     * ```
     */ 
    var HeaderMenuView = Backbone.View.extend({

        events: {
            'click a.icon-menu': 'showMainMenu'
        },

        /**
         * A view wrapping the main menu.  The view our menu button interacts with.
         *
         * @type    {MainMenuView}
         */
        main_menu_view: null,

        /**
         * Set the view that wraps the main menu and bind to its events.
         *
         * @param   {MainMenuView}  main_menu_view  The view to set.
         *
         * @return  this
         */
        setMainMenuView: function(main_menu_view) {
            this.main_menu_view = main_menu_view;
            this.listenTo(this.main_menu_view, 'menus.main.hidden', this.showMenuButton);
            return this;
        },

        /**
         * Show the main navigation menu.  Meant to be bound directly to an 
         * event as a handler.
         *
         * @param   {object}    event   The event object generated by javascript.
         *
         * @return  {boolean} The return value intended for the event, false in
         *      order to stop propagation and prevent the default.
         */
        showMainMenu: function(event) {
            this.hideMenuButton();
            if ( this.main_menu_view !== null) {
                this.main_menu_view.show();
            }
            return false;
        },

        
        /**
         * Show the menu button.
         *
         * @return void
         */
        showMenuButton: function() {
            this.$el.find("a.icon-menu").show();
        },

        /**
         * Hide the menu button.
         *
         * @return void
         */
        hideMenuButton: function() {
            this.$el.find("a.icon-menu").hide();
        }

    });

    return HeaderMenuView; 
});
